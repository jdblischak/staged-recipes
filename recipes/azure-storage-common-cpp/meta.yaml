{% set name = "azure-storage-common-cpp" %}
{% set version = "12.3.2" %}
{% set sha256 = "23248eebb855e6a08595bca40c1b972f1ad61965846c83907adc8da1eff31159" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/Azure/azure-sdk-for-cpp/archive/refs/tags/azure-storage-common_{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0

requirements:
  build:
    - {{ compiler("cxx") }}
    - cmake
    - make  # [not win]
    - ninja  # [win]
  host:
    - azure-core-cpp >=1.9.0
    - libxml2  # [not win]
    - openssl  # [not win]
  run:
    - azure-core-cpp >=1.9.0
    - libxml2  # [not win]
    - openssl  # [not win]

test:
  commands:
    - test -f "${PREFIX}/include/azure/storage/common/access_conditions.hpp"  # [not win]
    - test -f "${PREFIX}/lib/libazure-storage-common.${SHLIB_EXT}"  # [not win]
    - test -f "${PREFIX}/share/azure-storage-common-cpp/azure-storage-common-cppTargets.cmake"  # [not win]
    - if not exist %PREFIX%\\Library\\bin\\azure-storage-common.dll exit 1  # [win]
    - if not exist %PREFIX%\\Library\\include\\azure\\storage\\common\\access_conditions.hpp exit 1  # [win]
    - if not exist %PREFIX%\\Library\\lib\\azure-storage-common.lib exit 1  # [win]
    - if not exist %PREFIX%\\Library\\share\\azure-storage-common-cpp\\azure-storage-common-cppTargets.cmake exit 1  # [win]

about:
  home: https://github.com/Azure/azure-sdk-for-cpp/
  summary: Azure Storage Common Client Library for C++
  description: >-
    Azure Storage is a Microsoft-managed service providing cloud storage that is
    highly available, secure, durable, scalable, and redundant. Azure Storage
    includes Azure Blobs (objects), Azure Data Lake Storage Gen2, Azure Files,
    and Azure Queues. The Azure Storage Common library provides infrastructure
    shared by the other Azure Storage client libraries.
  license: MIT
  license_family: MIT
  license_file:
    - LICENSE.txt
    - sdk/storage/azure-storage-common/NOTICE.txt
  doc_url: https://azure.github.io/azure-sdk-for-cpp/
  dev_url: https://github.com/Azure/azure-sdk-for-cpp/tree/main/sdk/storage/azure-storage-common/

extra:
  recipe-maintainers:
    - jdblischak
    - Shelnutt2
